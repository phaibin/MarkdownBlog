---
layout: post
title: How To Read and Write XML Documents with GDataXML
date: 2011-05-18 06:59
categories:
- iphone
tags: []
published: true
comments: true
---
<p><h1 style="font-weight:bold;font-style:inherit;font-size:24px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 10px;"><span style="color:#000000;font-weight:normal;font-size:medium;">原文：http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml</span></h1>
<div class="entry" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;"><a rel="attachment wp-att-726" href="http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml/xmldocument"><img class="alignright size-full wp-image-726 bordered" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;float:right;border:1px solid #000000;margin:0;padding:0;" title="Let's read and write this!" src="http://d1xzuxjlafny7l.cloudfront.net/wp-content/uploads/2010/03/XMLDocument.jpg" alt="Let's read and write this!" width="250" height="122" /></a></p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">In my recent post on <a href="http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project">How To Choose the Best XML Parser for Your iPhone Project</a>, Saliom from the comments section suggested writing a post on how to use an XML library to read and write XML documents, create your own objects based on the documents, and perform XPath queries.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">This tutorial will show you how to do exactly that! We’ll create a project that reads a simple XML document that contains a list of RPG party members, and construct our own objects based on the XML. We’ll then add a new player to the party, and save it back out to disk again.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">This tutorial uses GDataXML, Google’s XML processing library. I chose GDataXML since it performs well for DOM parsers, supports both reading and writing, and is so easy to integrate. However, if you are using a different DOM parser, it should be almost exactly the same as this but just slightly different API calls.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Special thanks to Saliom for suggesting writing this tutorial!</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Our XML Document</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">We’re going to work with a simple XML document in this tutorial that looks like the following:</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;"><a rel="attachment wp-att-727" href="http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml/screenshot1-4"><img class="alignnone size-full wp-image-727 bordered" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:1px solid #000000;margin:0;padding:0;" title="Screenshot of our XML document" src="http://d1xzuxjlafny7l.cloudfront.net/wp-content/uploads/2010/03/Screenshot13.jpg" alt="Screenshot of our XML document" width="217" height="305" /></a></p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">As I mentioned, this list represents a list of characters you might have in a RPG dungeon crawl game. I wanted to keep the document pretty small to make the tutorial easy to follow, but still show you some interesting things such as using different datatypes and having lists of objects.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok, so let’s get started on our project to read and write this thing!</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Integrating GDataXML</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">You can integrate GDataXML into a new project with a few easy steps:</p>
<ul style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0 0 0 40px;padding:0;">
<li>Choose ProjectNew Project, and choose View-based Application, and name the project XMLTest.</li>
<li>Download the <a href="http://code.google.com/p/gdata-objectivec-client/downloads/list">gdata-objective-c client library</a>.</li>
<li>Unzip the file, navigate to SourceXMLSupport, and drag the two files GDataXMLNode.h and GDataXMLNode.m into your project.</li>
<li>In XCode, click ProjectEdit Project Settings and make sure “All Configurations” are checked.</li>
<li>Find the Search PathsHeader Search Paths setting and add /usr/include/libxml2 to the list.</li>
<li>Finally, find the LinkingOther Linker Flags section and add -lxml2 to the list.</li>
<li>Test out that everything is working by adding the following to the top of XMLTestAppDelegate.h:</li>
</ul>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "GDataXMLNode.h"</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">If your app compiles and runs GDataXML is integrated successfully!</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Creating Model Classses</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Next, let’s create a set of model classes that we want to represent our party of XML characters in our game. Basically, we want to make a set of objects that represent how we wish to work with our characters in our game.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">First, let’s create our Player class. Click on FileNew File, select Cocoa Touch ClassObjective-C class, choose Subclass of NSObject, and click Next. Name the file Player.m and verify that “Also create Player.h” is checked.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Then replace Player.h with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import &lt;Foundation/Foundation.h&gt;</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">typedef</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">enum</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    RPGClassFighter,
    RPGClassRogue,
    RPGClassWizard
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> RPGClass;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@interface</span> Player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSObject</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>_name;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">int</span> _level;
    RPGClass _rpgClass;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, copy<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>name;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, assign<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">int</span> level;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, assign<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> RPGClass rpgClass;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">id</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>initWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>name level<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">int</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>level rpgClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>RPGClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>rpgClass;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And replace Player.m with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Player.h"</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@implementation</span> Player
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> name <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> _name;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> level <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> _level;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> _rpgClass;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">id</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>initWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>name level<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">int</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>level rpgClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>RPGClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>self <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>super init<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        self.name <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> name;
        self.level <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> level;
        self.rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> rpgClass;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> self;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> dealloc <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    self.name <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>super dealloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Again, all of this is straight Objective-C, nothing really to do with XML at this point. However, I’m still including it for completeness sake.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Follow the same steps as above to create a new subclass of NSObject named Party. Replace Party.h with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import &lt;Foundation/Foundation.h&gt;</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@interface</span> Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSObject</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSMutableArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>_players;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, retain<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSMutableArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>players;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And Party.m with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Party.h"</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@implementation</span> Party
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> players <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> _players;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">id</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>init <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>self <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>super init<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        self.players <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSMutableArray</span></a> alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> init<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> autorelease<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> self;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> dealloc <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    self.players <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>super dealloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok, so far so good! Now let’s get to parsing our XML file and creating instances of these objects based on the XML.</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Parsing the XML with GDataXML</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Let’s get together some code quickly to use GDataXML to read the XML document and create a DOM tree in memory.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">First, <a href="http://d1xzuxjlafny7l.cloudfront.net/downloads/Party.xml">download Party.xml</a> and add it to your project.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Next, we’re going to create a new class to hold all of our parsing code. Add a new subclass of NSObject to your project named PartyParser.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Replace PartyParser.h with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import &lt;Foundation/Foundation.h&gt;</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@class</span> Party;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@interface</span> PartyParser <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSObject</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>loadParty;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And then replace PartyParser.m with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "PartyParser.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Party.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "GDataXMLNode.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Player.h"</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@implementation</span> PartyParser
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>dataFilePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">BOOL</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>forSave <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSBundle</span></a> mainBundle<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> pathForResource<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Party"</span> ofType<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"xml"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>loadParty <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>filePath <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>self dataFilePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>FALSE<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSData</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>xmlData <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSMutableData</span></a> alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> initWithContentsOfFile<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>filePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSError</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>error;
    GDataXMLDocument <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>doc <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLDocument alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> initWithData<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>xmlData
        options<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span> error<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:&amp;</span>error<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>doc <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span>; <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
    NSLog<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"%@"</span>, doc.rootElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>;
 
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>doc release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>xmlData release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span>;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok, finally some semi-interesting code here. First we create a static method called dataFilePath that returns the path to the Party.xml that we included in our project (and hence becomes part of our application’s bundle). Note that we have a boolean that indicates whether we want the path of the file for loading or saving – this isn’t used right now, but will be later.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Next, we create another static method called loadParty. This loads the raw bytes for the file off the disk with NSMutableData’s initWithContentsOfFile method, and then passes the data to GDataXML’s parser with the GDataXMLDocument initWithData method.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">If GDataXML has an error parsing the file (such as a missing close tag), it will return nil and return an NSError with more information. For this tutorial, we’ll just return nil if this occurs.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">However, if we receive a success, we just print out a description of the root element of the document (which should be the tag in our case).</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok, let’s put this to use. Modify your XMLTestAppDelegate.h so it looks like the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import &lt;UIKit/UIKit.h&gt;</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@class</span> XMLTestViewController;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@class</span> Party;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@interface</span> XMLTestAppDelegate <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSObject</span></a> &lt;UIApplicationDelegate&gt; <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    UIWindow <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>window;
    XMLTestViewController <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>viewController;
    Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>_party;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, retain<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> IBOutlet UIWindow <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>window;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, retain<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> IBOutlet XMLTestViewController <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>viewController;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@property</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>nonatomic, retain<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>party;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Note all we did here was declare a Party member variable.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Then modify your XMLTestAppDelegate.m so it looks like the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "XMLTestAppDelegate.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "XMLTestViewController.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "PartyParser.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Party.h"</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#6e371a;border:0 initial initial;margin:0;padding:0;">#import "Player.h"</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@implementation</span> XMLTestAppDelegate
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> window;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> viewController;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@synthesize</span> party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> _party;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>applicationDidFinishLaunching<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>UIApplication <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>application <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    self.party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>PartyParser loadParty<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
 
    <span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">// Override point for customization after app launch    </span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>window addSubview<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>viewController.view<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>window makeKeyAndVisible<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>dealloc <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    self.party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>viewController release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>window release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>super dealloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">@end</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Here we just add some include files and call the static method to load the party in our applicationDidFinishLaunching, and do some cleanup in our dealloc method.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok let’s see if it works so far! Compile and run your application, and if you go to RunConsole and scroll to the bottom, you should see something like the following print out:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2010</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>03<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">17</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">11</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">31</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">21.467</span> XMLTest<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">1568</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">207</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> GDataXMLElement 0x3b02530<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>type<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">1</span> name<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>Party xml<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"&lt;Party&gt;&lt;Player&gt;&lt;Name&gt;Butch&lt;/Name&gt;
&lt;Level&gt;1&lt;/Level&gt;&lt;Class&gt;Fighter&lt;/Class&gt;&lt;/Player&gt;&lt;Player&gt;
&lt;Name&gt;Shadow&lt;/Name&gt;&lt;Level&gt;2&lt;/Level&gt;&lt;Class&gt;Rogue&lt;/Class&gt;
&lt;/Player&gt;&lt;Player&gt;&lt;Name&gt;Crak&lt;/Name&gt;&lt;Level&gt;3&lt;/Level&gt;
&lt;Class&gt;Wizard&lt;/Class&gt;&lt;/Player&gt;&lt;/Party&gt;"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Converting the XML to our Model Objects</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Ok now that we see that it’s working so far, let’s continue the code to walk through the DOM tree and create instances of our model objects as we go.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">The replace the code in the loadParty method starting with replacing the NSLog statement with the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:596px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;">Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>Party alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> init<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> autorelease<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>partyMembers <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>doc.rootElement elementsForName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Player"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">for</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>partyMember <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">in</span> partyMembers<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    <span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">// Let's fill these in!</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>name;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">int</span> level;
    RPGClass rpgClass;
 
    <span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">// Name</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>names <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>partyMember elementsForName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Name"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>names.count &gt; <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>firstName <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>names objectAtIndex<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        name <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> firstName.stringValue;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">continue</span>;
 
    <span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">// Level</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>levels <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>partyMember elementsForName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Level"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>levels.count &gt; <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>firstLevel <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>levels objectAtIndex<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        level <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> firstLevel.stringValue.intValue;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">continue</span>;
 
    <span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">// Class</span>
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>classes <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>partyMember elementsForName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Class"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>classes.count &gt; <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>firstClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>classes objectAtIndex<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>firstClass.stringValue caseInsensitiveCompare<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Fighter"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> NSOrderedSame<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> RPGClassFighter;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>firstClass.stringValue caseInsensitiveCompare<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Rogue"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> NSOrderedSame<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> RPGClassRogue;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>firstClass.stringValue caseInsensitiveCompare<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Wizard"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> NSOrderedSame<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> RPGClassWizard;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">continue</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">continue</span>;
 
    Player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>Player alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> initWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>name level<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>level
            rpgClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>rpgClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> autorelease<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>party.players addObject<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>player<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>doc release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>xmlData release<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> party;</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">This is the real meat of our work. We use the elementsForName method on our root element to get all of the elements named “Player” underneath the root “Party” element.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Then, for each “Player” element we look to see what “Name” elements are underneath that. Our code only deals with one name, so we just take the first if there is more than one.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">We do similar processing for “Level” and “Class”, but for level we convert the string into an int, and for class we convert the string into an enumeration.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">If anything fails, we just skip that Player. Otherwise, we construct a Player model object with the values we read from the XML, and add it to our Party model object, and return that!</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">So let’s write some code to see if it works. Add the following to XMLTestAppDelegate.m in applicationDidFinishLaunching, after the call to loadParty:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>_party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">!=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">for</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">in</span> _party.players<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        NSLog<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"%@"</span>, player.name<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Compile and run your project, and if all works well you should see the following in the console output:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2010</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>03<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">17</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">12</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">33</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">04.301</span> XMLTest<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2531</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">207</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> Butch
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2010</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>03<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">17</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">12</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">33</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">04.303</span> XMLTest<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2531</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">207</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> Shadow
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2010</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>03<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">17</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">12</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">33</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">04.304</span> XMLTest<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2531</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">207</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> Crak</pre>
</td>
</tr>
</tbody>
</table>
</div>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Querying with XPath</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">XPath is a simple syntax you can use to identify portions of an XML document. The easiest way to get a handle on it is by seeing a few examples.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">For example, the following XPath expression would identify all of the Player elements in our document:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">//Party/Player</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And the following would just identify the first Player element in our document:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">//Party/Player[1]</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And finally, the following would identify the player with the name of Shadow:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">//Party/Player[Name="Shadow"]</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Let’s see how we could use XPath by slightly modifying our loadParty method. Replace the line that loads the party members as the following:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:italic;font-size:12px;font-family:inherit;vertical-align:baseline;color:#11740a;border:0 initial initial;margin:0;padding:0;">//NSArray *partyMembers = [doc.rootElement elementsForName:@"Player"];</span>
<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>partyMembers <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>doc nodesForXPath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"//Party/Player"</span> error<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">nil</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">If you run the code, you’ll see the exact same results. So there isn’t an advantage of using XPath in this case, since we are interested in reading the entire XML document and constructing a model in memory.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">However, you can imagine that this could be pretty useful if we had a big complicated XML document and we wanted to quickly dig down to find a particular element, without having to look through the children of node A, then the children of node B, and so on until we find it.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">If you are interested in learning more about XPath, check out a nice <a href="http://www.w3schools.com/XPath/xpath_intro.asp">tutorial from W2Schools</a>. Also, I’ve found this <a href="http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm">online XPath expression testbed</a> quite handy when trying to construct XPath expressions.</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">Saving Back to XML</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">So far we’ve only done half of the picture: reading data from an XML document. What if we want to add a new player to our party and then save the new document back to disk?</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Well, the first thing we need to do is determine where we are going to save the XML document. So far we’ve been loading the XML document from our application’s bundle. We can’t save to the bundle, however, because it is read-only. But we can save to the application’s document directory, so let’s do that.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Modify your dataFilePath method in PartyParser.m to read as follows:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>dataFilePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">BOOL</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>forSave <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSArray</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>paths <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> NSSearchPathForDirectoriesInDomains<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>NSDocumentDirectory,
        NSUserDomainMask, <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">YES</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>;
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>documentsDirectory <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>paths objectAtIndex<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">0</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>documentsPath <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>documentsDirectory
        stringByAppendingPathComponent<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Party.xml"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>forSave ||
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSFileManager</span></a> defaultManager<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> fileExistsAtPath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>documentsPath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> documentsPath;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">return</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSBundle</span></a> mainBundle<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> pathForResource<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Party"</span> ofType<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"xml"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Note that when we’re loading the XML, we want to load from the file in the documents directory if it exists, but otherwise fall back to reading the XML file that ships with the app, like we’ve been doing so far.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Now, let’s write a method to construct our XML document from our data model and save it out to disk. Add a new methdo to PartyParser.m as follows:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>saveParty<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
    GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span> partyElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLNode elementWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Party"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
 
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">for</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>player <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">in</span> party.players<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
 
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span> playerElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLNode elementWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Player"</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span> nameElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLNode elementWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Name"</span> stringValue<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>player.name<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span> levelElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLNode elementWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Level"</span> stringValue<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>
                <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> stringWithFormat<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"%d"</span>, player.level<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>classString;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>player.rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> RPGClassFighter<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            classString <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Fighter"</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>player.rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> RPGClassRogue<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            classString <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Rogue"</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">else</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">if</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>player.rpgClass <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">==</span> RPGClassWizard<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
            classString <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Wizard"</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
        GDataXMLElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span> classElement <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span>
            <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLNode elementWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Class"</span> stringValue<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>classString<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
 
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>playerElement addChild<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>nameElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>playerElement addChild<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>levelElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>playerElement addChild<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>classElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
        <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>partyElement addChild<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>playerElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span>
 
    GDataXMLDocument <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>document <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>GDataXMLDocument alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>
            initWithRootElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>partyElement<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> autorelease<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSData</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>xmlData <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> document.XMLData;
 
    <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#400080;border:0 initial initial;margin:0;padding:0;">NSString</span></a> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span>filePath <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">=</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>self dataFilePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>TRUE<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
    NSLog<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Saving xml data to %@..."</span>, filePath<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>;
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>xmlData writeToFile<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>filePath atomically<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">YES</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
 
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">As you can see, GDataXML makes it quite easy and straightforward to construct our XML document. You simply create elements with elementWithName: or elementWithName:stringValue, connect them to each other with addChild, and then create a GDataXMLDocument specifying the root element. In the end, you get an NSData that you can easily save to disk.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Next declare your new method in PartyParser.h:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">+</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>saveParty<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>Party <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>party;</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Then inside the party != nil check in applicationDidFinishLaunching, go ahead and add a new party member to our list:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>_party.players addObject<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>Player alloc<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> initWithName<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">@</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#bf1d1a;border:0 initial initial;margin:0;padding:0;">"Waldo"</span> level<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">1</span>
    rpgClass<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>RPGClassRogue<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> autorelease<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">And finally let’s save out the updated party list in applicationWillTerminate:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#a61390;border:0 initial initial;margin:0;padding:0;">void</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>applicationWillTerminate<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">(</span>UIApplication <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">*</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">)</span>application <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">{</span>
    <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span>PartyParser saveParty<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span>_party<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span>;
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">}</span></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Compile and run your project, and after the app loads go ahead and exit. The app should print out to the console where it saves your XML. It will look something like this:</p>
<div class="wp_codebox" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;text-align:left;color:#110000;width:595px;border:1px solid silver;margin:0 0 .5em;padding:0;">
<table style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;width:594px;border:1px none initial;margin:0!important;padding:0;">
<tbody>
<tr style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;">
<td class="code" style="font-weight:normal;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:top;text-align:center;margin:0;padding:2px 4px;">
<pre style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:monospace;vertical-align:baseline;width:auto;float:none;text-align:left;border:0 none initial;margin:0;padding:0;"><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">2010</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>03<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">17</span> <span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">13</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">34</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">14.447</span> XMLTest<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">[</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">3118</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">:</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#2400d9;border:0 initial initial;margin:0;padding:0;">207</span><span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">]</span> Saving xml data to
<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>Users<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>rwenderlich<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>Library<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>Application Support<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>iPhone Simulator<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>User<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>
Applications<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>BF246A72<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>7E20<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>47CF<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>93FF<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">-</span>AA2CEF50A6B0<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>Documents<span style="font-weight:inherit;font-style:inherit;font-size:12px;font-family:inherit;vertical-align:baseline;color:#002200;border:0 initial initial;margin:0;padding:0;">/</span>Party.xml..</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Go ahead and find that folder with Finder and open up the XML, and if all goes well you should see your new party member in the XML:</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;"><a rel="attachment wp-att-729" href="http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml/screenshot2-5"><img class="alignnone size-full wp-image-729" style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0;" title="Screenshot of our Modified XML" src="http://d1xzuxjlafny7l.cloudfront.net/wp-content/uploads/2010/03/Screenshot24.jpg" alt="Screenshot of our Modified XML" width="500" height="170" /></a></p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Then run the app again, open up your console log, and see if you can find where Waldo is! :]</p>
<h2 style="font-weight:bold;font-style:inherit;font-size:18px;font-family:inherit;vertical-align:baseline;color:#006837;border:0 initial initial;margin:0;padding:5px 0 15px;">And That’s A Wrap!</h2>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">Here is a <a href="http://d1xzuxjlafny7l.cloudfront.net/downloads/XMLTest.zip">sample project</a> with all of the code that we’ve developed in the tutorial so far. Note that the app doesn’t show anything in the GUI as that isn’t important for this tutorial – it just shows a few output lines in the console.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">By the way – before you use XML in your projects, you should take a second to consider why you want to use XML in the first place and if that is the best choice. In this example, if all we were using XML for was loading and saving characters for this particular app, XML would probably be overkill, and it would be better to use another serialization format such as property lists, NSCoding, or even Core Data.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">However, XML really starts to shine when you start having multiple applications use the same data. If we had a Mac application that generated a list of characters and we wanted our iPhone app to be able to read and modify that list, that’s when it becomes to be particularly useful. This is because XML is a standard format for exchanging data that is quite easy to work with, as you’ve seen.</p>
<p style="font-weight:inherit;font-style:inherit;font-size:13px;font-family:inherit;vertical-align:baseline;border:0 initial initial;margin:0;padding:0 0 10px;">So any plans to use XML reading and writing in your apps? What are you using it for?</p>
</div></p>
